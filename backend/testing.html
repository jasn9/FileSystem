<html>
  <head>
    <script>
      var socket=new WebSocket("ws://file-system-backend.herokuapp.com");
      // var socket=new WebSocket("ws://localhost:8081");
      socket.onopen=function(e){
        console.log("Client: Connection established");
        // socket.send("Client: Connection established");
      };

      socket.onmessage = function(event) {
        if(event.data!='ping')
          console.log(`[message] Data received from server: ${event.data}`);
        else
          console.log('A ping request')
      };

      socket.onclose = function(event) {
        if (event.wasClean) {
          console.log(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
        } else {
          // e.g. server process killed or network down
          // event.code is usually 1006 in this case
          console.log('[close] Connection died');
        }
      };

      socket.onerror = function(error) {
        console.log(`[error] ${error.message}`);
      };
      function startSocket(){
          var msgbox_value=document.getElementById('msgbox').value;
          if(socket!==null){
            socket.send(msgbox_value);
          }
          else{
            console.log("socket connection is disconnected, new connection is made")
            socket=new WebSocket("ws://localhost:8081");
          }
      }
      function stopSocket(){
          if(socket!==null){
            socket.close();
          }
          else{
            console.log("socket connection is disconnected, new connection is made")
            socket=new WebSocket("ws://localhost:8081");
          }
      }
    </script>
  </head>
  <body>
    <h1>Real Time messaging</h1>
    <pre id="message" style="height:400px; overflow: scroll"></pre>
    <input type="text" id="msgbox" placeholder="Type msg here" style="display: block; width: 100%; margin-bottom: 10px; padding: 10px;"/>
    <button onclick="startSocket()">Send msg through socket connections</button>
    <button onclick="stopSocket()">Stop socket connections</button>
  </body>
</html>